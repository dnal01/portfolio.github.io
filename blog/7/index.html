<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seventh Entry - Web Portfolio of Denys</title>
    <link rel="stylesheet" href="https://dnal01.github.io/portfolio.github.io/main.css">
</head>

<body>
    <header>
        <ul class="navigation">
            <li class="navigation-item"><a class="item-link" href="https://dnal01.github.io/portfolio.github.io/index.html">Home</a></li>
            <li class="navigation-item"><a class="item-link" href="https://dnal01.github.io/portfolio.github.io/blog/index.html">Blog</a></li>
            <li class="navigation-item"><a class="item-link" href="https://dnal01.github.io/portfolio.github.io/projects/index.html">Projects</a></li>
            <li class="navigation-item"><a class="item-link" href="https://dnal01.github.io/portfolio.github.io/contact/index.html">Contact</a></li>
        </ul>
    </header>
    <main>
        <h1 class="title">Seventh Entry</h1>
        <p class="left date">July 15, 2024</p>
        <div class="block left">
            <section>
                <h2>My takeaways today</h2>
                <h3>SQL</h3>
                <h4>Creation of .db file and import of csv file into the .db file</h4>
                <p><code>sqlite3 FILE.db</code></p>
                <p><code>.mode csv</code></p>
                <p><code>.import FILE.csv table</code></p>
                <h4>Checking of headers</h4>
                <p><code>.schema</code></p>
                <h4>Selecting data</h4>
                <p><code>SELECT ...1 FROM table ...2 = 'Text here';</code></p>
                <p>In ...1 can go either column name (use "field name" for fields with spaces) or function</p>
                <ul> 
                    <li><code>DISTINCT(columnName)</code> - lists uniq value and combines into one column. Can work with multiple columns looking at uniq combined value without brackets, then creates two columns</li>
                    <li><code>LOWER</code></li>
                    <li><code>UPPER</code></li>
                    <li><code>ROUND(number_to_round, decimal_places)</code>, decimal is optional, if avoided, rounds to 0. Can be also negative. <strong>Example: </strong><code>ROUND(AVG(budget), 2)</code></li>
                    <li><code>JOIN</code> - joins tables</li>
                    <h5>Aggregate functions</h5>
                    <p>Functions which performs a calculation on several values and return a single value.</p>
                    <ul>
                        <h5>Numeric fields only</h5>
                        <li><code>AVG()</code></li>
                        <li><code>SUM()</code></li>
                    </ul>
                    <ul>
                        <h5>Various data types</h5>
                        <p>A<->Z - first or last in alphabet</p>
                        <li><code>MIN()</code></li>
                        <li><code>MAX()</code></li>
                        <li><code>COUNT(*)</code> - counts values in a field and <code>COUNT(field_name)</code> - counts records in a table</li>    
                    </ul>
                    <p>It is possible to <strong>combine functions</strong>, e.g. <code>COUNT(DISTINCT field_name)</code></p>
                </ul>
                <p>In ...2 go key words:</p>
                <ul>
                    <li><code>WHERE</code>. E.g. <code>WHERE color = 'green'</code> or <code>WHERE year <> 2020</code>
                        <p>Note: <code><></code> - not equal to. e.g. <> 2020 - all except 2020.</p>
                    </li>
                    <li><code>AS</code> to treat something as something, e.g. COUNT(*) AS n. Next time when I want to use this combination I need just to write n. I.e. it may rename e.g. column after query.</li>
                    <li><code>IS</code>. <strong>Example:</strong> <code>IS NULL</code>, <code>IS NOT NULL</code></li>
                    <li><code>LIKE</code> or <code>NOT LIKE</code> - the <code>LIKE</code> operator is used in a <code>WHERE</code> clause to search for a specified pattern in a column
                        <p>There are two wildcards often used in conjunction with the LIKE operator:</p>
                        <ul>
                            <li>
                                The percent sign <code>%</code> represents zero, one, or multiple characters, e.g. 'Ade%' will find all words that contains 'Ade'
                            </li>
                            <li>
                                The underscore sign <code>_</code> represents one, single character, e.g. 'Ev_' will find only words where one character is missing, e.g. 'Eve'
                            </li>
                            <li>
                                <strong>Examples:</strong>
                                <ul>
                                    <li><code>fieldName LIKE '%r'</code>, which ends with 'r'</li>
                                    <li><code>fieldName LIKE '__t%'</code>, where third letter is 't' and something after</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><code>IN (SELECT...)</code> or <code>IN (<i>value1, value2, ...</i>)</code> or <code>NOT IN(...)</code> in the all items from the result or specified values</li>
                    <li>
                        <code>ORDER BY fieldName</code> +
                        <ul>
                            <li><code>ASC</code> - Ascending order</li>
                            <li><code>DESC</code> - Descending order</li>
                        </ul>
                        <h5>Order by multiple values</h5>
                        <code>ORDER BY field_one ASC, field_two DESC</code>. First it sorts by the first field, then by second.
                        <p><strong>Note</strong>, that <code>fieldName</code>, when used Alias aka <code>AS</code>, needs to be an Alias name, because <code>ORDER BY</code> is executed after <code>AS</code></p>
                    </li>
                    <li><code>LIMIT</code></li>
                    <li><code>GROUP BY field_one, field_two ORDER BY fieldName</code></li>
                    <li><code>HAVING</code> - filtering grouped data</li>
                    <li><code>= (SELECT...)</code> = the single value in the result</li>
                    <li><code>ON keyTb1 = keyTb2</code> - works with JOIN</li>
                    <h5>Multiple criteria</h5>
                    <ul>
                        <li><code>AND</code></li>
                        <li><code>OR</code></li>
                        <li><code>BETWEEN 1 AND 5</code> - is inclusive</li>
                        <section><strong>Combining examples:</strong>
                            <ul>
                                <li><code>(Statement1 OR Statement2) AND (Statement3 OR Statement4)</code></li>
                                <li><code>fieldName BETWEEN 1 AND 5 AND Statement1</code></li>
                            </ul>
                        </section>
                    </ul>
                    <h5>Order of execution</h5>
                    <ol>
                        <li>FROM</li>
                        <li>WHERE</li>
                        <li>GROUP BY</li>
                        <li>HAVING</li>
                        <li>SELECT</li>
                        <li>ORDER BY</li>
                        <li>LIMIT</li>
                    </ol>
                </ul>
                <h5>Examples</h5>
                <ul>
                    <li><code>SELECT column1, column2 FROM table1 JOIN table2 ON table1Name.column_key_in_table1 = table2Name.column_key_in_table2 WHERE column2 >= value LIMIT value;</code> - join two tables based on the same key values.</li>
                    <li><code>SELECT column1 FROM table WHERE column_key_in_table1 IN (SELECT column_key_in_table2 FROM table2 WHERE condition);</code> - search based on key value between two tables</li>
                    <li><code>SELECT column1 FROM table1 WHERE column2 = (SELECT column FROM table2 WHERE column3 = 'text');</code> - search in the first table based on a value from a second.</li>
                    <li><code>SELECT columnTb1 FROM table1 WHERE column2Tb1 IN (SELECT column1tb2 FROM table2 WHERE column2tb2 = (SELECT column1tb3 FROM table3 WHERE column2tb3 = 'Text'));</code>- search a value in a first table based on filtered result from other two tables.</li>
                    <li><code>SELECT column1tb1 FROM tb1, tb2, tb3 WHERE tb1.cl1tb1 = tb2.cl1tb2 AND tb3.cm1tb3 = tb2.cl2tb2 AND cl2tb1 = 'TEXT';</code> - search in a first table based on filtered result from other tables.</li>
                </ul>
                <h5>Insertion of data</h5>
                <p><code>INSERT INTO tableName (columnName1, columnName2) VALUES('Value1', 'Value2');</code></p>
                <h5>Deletion of data</h5>
                <p><code>DELETE FROM table WHERE condition;</code> - deletes a row. (e.g. WHERE column IS NULL)</p>
                <p><code>DELETE FROM table;</code> - deletes everything.</p>
                <h5>Update of data</h5>
                <p><code>UPDATE table SET column = value WHERE condition1, condition2;</code> - deletes a row.</p>
                <h5>Creation of Tables with certain data types</h5>
                <p><code>CREATE TABLE table (key dataType);</code> do this before mode and import command.</p>
                <h5>Data types</h5>
                <ul>
                    <li><code>BLOB</code> - binary large object</li>
                    <li><code>INTEGER</code></li>
                    <li><code>NUMERIC</code> - dates and times</li>
                    <li><code>REAL</code> - decimal points in it</li>
                    <li><code>TEXT</code></li>
                </ul>
                <h5>Data types - key words</h5>
                <ul>
                    <li><code>NOT NULL</code></li>
                    <li><code>UNIQUE</code></li>
                    <li><code>PRIMARY KEY</code> - is the column which uniquely identifies your data</li>
                    <li><code>FOREIGN KEY</code> - appearance of those IDs elsewhere</li>
                </ul>
                <h5>Turn on a timer</h5>
                <p><code>.timer ON</code></p>
                <h5>Indexes</h5>
                <p><code>CREATE INDEX indexName ON table (column, ...);</code> - if search on a column frequently, prepare data to search faster.</p>
                <h5>Views</h5>
                <p><code>CREATE VIEW viewName AS SELECT columnName FROM tableName</code> - creates a virtual view which can be accessed any time. Updates from the original table as soon as new query is initiated. I.e. it stores a query in memory.</p>
                <h4>SQL using Python</h4>
                <h5>Combining SQL and Python code</h5>
                    <pre>
from cs50 import SQL
db = SQL("sqlite:///FILE.db") // Open db FILE
var1 = input("TEXT: ")
var2 = db.execute("SELECT COUNT(*) AS n FROM table WHERE column = ?", var1) // Gives back temporary table
var3 = rows[0] // To get back only the first row in that result set or temporary table
print(row["n"])</pre>
                <h5>Execution of a code altogether - wrapping a code</h5>
                    <pre>
db.execute("BEGIN TRANSACTION")
var1 = db.execute("SELECT column1 FROM table WHERE column2 = ?", column2);
var1 = var1[0]["column1"]
db.execute("UPDATE posts SET column1 = ? WHERE column2 = ?", column1 + 1, column2);
db.execute("COMIT")</pre>
            </section>
            <section>
                <h2 class="section">Links to helpful websites</h2>
                <ul>
                    <li><a href="cs50.readthedocs.io/libraries/cs50/python/#cs50.SQL">CS50 Library for Python</a></li>
                    <li><a href="https://www.w3schools.com/sql/">SQL Tutorial</a></li>
                    <li><a href="https://www.w3schools.com/sql/sql_ref_keywords.asp">SQL Keywords Reference</a></li>
                    <li><a href="https://www.w3schools.com/sql/sql_wildcards.asp">SQL Wildcards</a></li>
                    <li><a href="https://www.sqlstyle.guide">SQL Style Guide</a></li>
                </ul>
            </section>
            <section>
                <h2 class="section">Questions which I have got</h2>
                <p></p>
            </section>
        </div>
        <ul class="sticky-element">
            <li class="left-tiem">
                <a href="https://dnal01.github.io/portfolio.github.io/blog/6/index.html">
                    <button class="arrow">
                        <span class="arrow-previous"></span>
                    </button>
                </a>
            </li>
            <li class="right-tiem">
                <a href="https://dnal01.github.io/portfolio.github.io/blog/8/index.html">
                    <button class="arrow">
                        <span class="arrow-next"></span>
                    </button>
                </a>
            </li>
        </ul>
    </main>
</body>

</html>